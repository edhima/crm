import{d as b,a$ as N,o as c,c as S,u as e,_ as D,x as T,v as r,y as C,b0 as te,e as v,I as ae,b1 as se,a as ne,b as p,t as I,V as E,L as g,z as q,P as le,f as J,F as ee,Q as oe,r as ie,H as re,g as _e,S as ue,T as de}from"./index.b477d4b7.js";import{d as z}from"./VSelect.b74e084b.js";const pe=["innerHTML"],me=b({__name:"SetupWizardCookies",setup(u){const t=N();return(l,a)=>(c(),S("div",{class:"setup-wizard-cookies-container",innerHTML:e(t).label("LBL_MINT4_SETUP_WIZARD_COOKIES_DESCRIPTION")},null,8,pe))}});const ce=D(me,[["__scopeId","data-v-6952aa1a"]]),Le={class:"setup-wizard-user-profile-container"},fe=b({__name:"SetupWizardUserProfile",setup(u,{expose:t}){const l=M(),a=N(),i=T(!1);function d(){var m;return i.value=!1,(m=l.setupData.last_name)!=null&&m.trim()?!0:(i.value=!0,!1)}return t({validate:d}),(m,_)=>(c(),S("div",Le,[r(C,{modelValue:e(l).setupData.first_name,"onUpdate:modelValue":_[0]||(_[0]=o=>e(l).setupData.first_name=o),density:"comfortable",variant:"outlined",label:e(a).label("LBL_MINT4_SETUP_WIZARD_USER_PROFILE_FIRST_NAME"),"hide-details":""},null,8,["modelValue","label"]),r(C,{modelValue:e(l).setupData.last_name,"onUpdate:modelValue":_[1]||(_[1]=o=>e(l).setupData.last_name=o),density:"comfortable",variant:"outlined",label:e(a).label("LBL_MINT4_SETUP_WIZARD_USER_PROFILE_LAST_NAME"),"hide-details":"auto","error-messages":i.value?e(a).label("LBL_MINT4_ERROR_REQUIRED_FIELD"):""},null,8,["modelValue","label","error-messages"]),r(C,{modelValue:e(l).setupData.email,"onUpdate:modelValue":_[2]||(_[2]=o=>e(l).setupData.email=o),density:"comfortable",variant:"outlined",label:e(a).label("LBL_MINT4_SETUP_WIZARD_USER_PROFILE_EMAIL"),"hide-details":""},null,8,["modelValue","label"])]))}});const Se=D(fe,[["__scopeId","data-v-94d08aad"]]),Te={class:"setup-wizard-locale-settings-container"},Ee=b({__name:"SetupWizardLocaleSettings",setup(u){const t=te(),l=N(),a=M(),i=v(()=>{var o,n,s;return Object.entries((s=(n=(o=t.initData)==null?void 0:o.global)==null?void 0:n.time_zones)!=null?s:{}).map(([L,f])=>({value:L,title:f}))}),d=v(()=>{var o,n,s;return Object.entries((s=(n=(o=t.initData)==null?void 0:o.global)==null?void 0:n.name_formats)!=null?s:{}).map(([L,f])=>({value:L,title:f}))}),m=v(()=>{var o,n,s;return Object.entries((s=(n=(o=t.initData)==null?void 0:o.global)==null?void 0:n.time_formats)!=null?s:{}).map(([L,f])=>({value:L,title:f}))}),_=v(()=>{var o,n,s;return Object.entries((s=(n=(o=t.initData)==null?void 0:o.global)==null?void 0:n.date_formats)!=null?s:{}).map(([L,f])=>({value:L,title:f}))});return(o,n)=>(c(),S("div",Te,[r(z,{modelValue:e(a).setupData.time_zone,"onUpdate:modelValue":n[0]||(n[0]=s=>e(a).setupData.time_zone=s),items:i.value,density:"comfortable",variant:"outlined",label:e(l).label("LBL_MINT4_SETUP_WIZARD_LOCALE_SETTINGS_TIME_ZONE"),"hide-details":""},null,8,["modelValue","items","label"]),r(z,{modelValue:e(a).setupData.time_format,"onUpdate:modelValue":n[1]||(n[1]=s=>e(a).setupData.time_format=s),items:m.value,density:"comfortable",variant:"outlined",label:e(l).label("LBL_MINT4_SETUP_WIZARD_LOCALE_SETTINGS_TIME_FORMAT"),"hide-details":""},null,8,["modelValue","items","label"]),r(z,{modelValue:e(a).setupData.date_format,"onUpdate:modelValue":n[2]||(n[2]=s=>e(a).setupData.date_format=s),items:_.value,density:"comfortable",variant:"outlined",label:e(l).label("LBL_MINT4_SETUP_WIZARD_LOCALE_SETTINGS_DATE_FORMAT"),"hide-details":""},null,8,["modelValue","items","label"]),r(z,{modelValue:e(a).setupData.display_name_format,"onUpdate:modelValue":n[3]||(n[3]=s=>e(a).setupData.display_name_format=s),items:d.value,density:"comfortable",variant:"outlined",label:e(l).label("LBL_MINT4_SETUP_WIZARD_LOCALE_SETTINGS_NAME_FORMAT"),"hide-details":""},null,8,["modelValue","items","label"])]))}});const Ie=D(Ee,[["__scopeId","data-v-d141aef6"]]),M=ae("setup-wizard",()=>{var R,P,y,A,U,W,B,O,w,V,x,k,h,F,Z,$,G,H,j,K,Q,X,Y;const u=se(),t=te(),l=T(!1),a=T(!1),i=T({first_name:(P=(R=u.user)==null?void 0:R.first_name)!=null?P:"",last_name:(A=(y=u.user)==null?void 0:y.last_name)!=null?A:"",email:(W=(U=u.user)==null?void 0:U.email)!=null?W:"",time_zone:(O=(B=u.user)==null?void 0:B.preferences.timezone)!=null?O:"Europe/Warsaw",time_format:(h=(k=(w=u.user)==null?void 0:w.preferences.date_time_preferences.time)!=null?k:(x=(V=t.initData)==null?void 0:V.global)==null?void 0:x.time_format)!=null?h:"H:i",date_format:(H=(G=(F=u.user)==null?void 0:F.preferences.date_time_preferences.date)!=null?G:($=(Z=t.initData)==null?void 0:Z.global)==null?void 0:$.date_format)!=null?H:"d.m.Y",display_name_format:(Y=(X=(j=u.user)==null?void 0:j.preferences.name_format)!=null?X:(Q=(K=t.initData)==null?void 0:K.global)==null?void 0:Q.name_format)!=null?Y:"s f l"}),d=[{title:"LBL_MINT4_SETUP_WIZARD_COOKIES_TITLE",component:ce,backLabel:"LBL_MINT4_DECLINE",nextLabel:"LBL_MINT4_ACCEPT"},{title:"LBL_MINT4_SETUP_WIZARD_USER_PROFILE_TITLE",component:Se},{title:"LBL_MINT4_SETUP_WIZARD_LOCALE_SETTINGS_TITLE",component:Ie}],m=T(null),_=T(0),o=v(()=>d[_.value]);function n(){_.value===0?L():_.value--}function s(){_.value===d.length-1?f():_.value++}async function L(){a.value=!0,await u.logout()}async function f(){a.value=!0;try{(await ne.post("api/confirm_login_wizard",i.value)).status===200&&(u.user&&(u.user.show_login_wizard=!1),l.value=!0)}finally{a.value=!1}}return{userInfo:m,isLoading:a,isFinished:l,steps:d,setupData:i,currentStep:o,currentStepNumber:_,prevStep:n,nextStep:s}}),ve={class:"setup-wizard-complete-container"},be={class:"setup-wizard-complete-title"},Ne={class:"setup-wizard-complete-subtitle"},ze=b({__name:"SetupWizardComplete",setup(u){const t=N();function l(a){window.open(a,"_blank")}return(a,i)=>(c(),S("div",ve,[p("div",be,I(e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_TITLE")),1),p("div",Ne,I(e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_SUBTITLE")),1),p("div",{class:"setup-wizard-complete-link",onClick:i[0]||(i[0]=d=>l("https://minthcm.org"))},[r(E,{icon:"mdi-earth",size:"20"}),p("span",null,I(e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_MINTHCMORG")),1),r(E,{icon:"mdi-open-in-new",class:"ms-auto",size:"20"})]),p("div",{class:"setup-wizard-complete-link",onClick:i[1]||(i[1]=d=>l("https://minthcm.org/documentation"))},[r(E,{icon:"mdi-file-document-multiple",size:"20"}),p("span",null,I(e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_DOCUMENTATION")),1),r(E,{icon:"mdi-open-in-new",class:"ms-auto",size:"20"})]),p("div",{class:"setup-wizard-complete-link",onClick:i[2]||(i[2]=d=>l("https://minthcm.org/support"))},[r(E,{icon:"mdi-forum",size:"20"}),p("span",null,I(e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_SUPPORT")),1),r(E,{icon:"mdi-open-in-new",class:"ms-auto",size:"20"})]),r(g,{text:e(t).label("LBL_MINT4_SETUP_WIZARD_COMPLETE_SCREEN_BTN"),variant:"primary",class:"mt-6",onClick:i[3]||(i[3]=d=>a.$router.push({name:"dashboard"}))},null,8,["text"])]))}});const De=D(ze,[["__scopeId","data-v-7fdda0ba"]]),Ce={class:"setup-wizard"},ge={class:"setup-wizard-container"},Me={key:0,class:"setup-wizard-loader"},Re={class:"setup-wizard-title"},Pe={class:"setup-wizard-buttons"},ye={class:"setup-wizard-footer"},Be=b({__name:"SetupWizard",setup(u){const t=M(),l=N(),a=T();function i(){var m;(!((m=a.value)!=null&&m.validate)||a.value.validate())&&t.nextStep()}const d=v(()=>t.currentStep.nextLabel?t.currentStep.nextLabel:t.currentStepNumber===t.steps.length-1?"LBL_MINT4_FINISH":"LBL_MINT4_NEXT");return(m,_)=>{var o,n;return c(),S("div",Ce,[p("div",ge,[r(le,null,{default:q(()=>[e(t).isLoading?(c(),S("div",Me,[r(re,{indeterminate:"",color:"primary",size:"64"})])):_e("",!0)]),_:1}),e(t).isFinished?(c(),J(De,{key:0})):(c(),S(ee,{key:1},[p("div",Re,I(e(l).label(e(t).currentStep.title)),1),r(oe,{"hide-on-leave":""},{default:q(()=>{var s;return[(c(),J(ue((s=e(t).currentStep)==null?void 0:s.component),{ref_key:"setupWizardStepComponent",ref:a},null,512))]}),_:1}),p("div",Pe,[r(g,{variant:"text",text:e(l).label((n=(o=e(t).currentStep)==null?void 0:o.backLabel)!=null?n:"LBL_MINT4_BACK"),onClick:e(t).prevStep},null,8,["text","onClick"]),r(g,{variant:"primary",text:e(l).label(d.value),onClick:i},null,8,["text"])]),p("div",ye,[(c(!0),S(ee,null,ie(e(t).steps.length,s=>(c(),S("div",{key:s,class:de({"setup-wizard-footer-dot":!0,"setup-wizard-footer-dot-active":e(t).currentStepNumber===s-1})},null,2))),128))])],64))])])}}});export{Be as default};
